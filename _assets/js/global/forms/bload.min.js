!function(i){var o=function(){};o.prototype.init=function(i,o,t){this.showing=!1,this.$tomask=i,this.options=o,this.callback=t,this.show()},o.prototype.show=function(){var o=this;if(1!=o.showing){var t=o.$tomask.offset();if(0==o.options.fullScreen){switch(o.options.imageAlign){case"top":var a=t.left+(o.$tomask.width()-(o.options.imageDims.w+2*o.options.imagePadding))/2,s=t.top+8;break;case"bottom":var a=t.left+(o.$tomask.width()-(o.options.imageDims.w+2*o.options.imagePadding))/2,s=t.top+(o.$tomask.height()-(o.options.imageDims.h+2*o.options.imagePadding)-8);break;case"left":var a=t.left+8,s=t.top+(o.$tomask.height()-(o.options.imageDims.h+2*o.options.imagePadding))/2;break;case"right":var a=t.left+(o.$tomask.width()-(o.options.imageDims.w+2*o.options.imagePadding)-8),s=t.top+(o.$tomask.height()-(o.options.imageDims.h+2*o.options.imagePadding))/2;break;default:var a=t.left+(o.$tomask.width()-(o.options.imageDims.w+2*o.options.imagePadding))/2,s=t.top+(o.$tomask.height()-(o.options.imageDims.h+2*o.options.imagePadding))/2}e="absolute"}else var a=(i(window).width()-(o.options.imageDims.w+2*o.options.imagePadding))/2,s=(i(window).height()-(o.options.imageDims.h+2*o.options.imagePadding))/2,e="fixed";var n={padding:o.options.imagePadding+"px",backgroundColor:"#000",position:e,borderRadius:"4px 4px 4px 4px",top:s,left:a,zIndex:1e4};o.$mask=i("<div />").css(n);var p=0!=o.$tomask.is(":visible")||0!=o.options.fullScreen;if(p&&o.$mask.append(!1===o.options.imagePath?i("<div />").addClass("bloading"):i("<div />").css({backgroundImage:"url("+o.options.imagePath+")",width:o.options.imageDims.w+"px",height:o.options.imageDims.h+"px"})),callback=o.callback,o.showing=!0,!0===o.options.overlay.show){var d={position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:o.options.overlay.color,zIndex:9999};0==o.options.fullScreen&&(d.position="absolute",d.top=t.top+"px",d.left=t.left+"px",d.width=o.$tomask.width()+"px",d.height=o.$tomask.height()+"px"),p&&(o.$overlay=i("<div />").css(d),i("body").append(o.$overlay.fadeTo(o.options.fadeInSpeed,o.options.overlay.opacity)))}i("body").append(o.$mask.fadeTo(o.options.fadeInSpeed,o.options.maskOpacity,function(){i.isFunction(callback)&&callback.call(this,o)}))}},o.prototype.hide=function(){this.showing=!1,this.$mask.remove(),1==this.options.overlay.show&&this.$overlay.remove()},i.fn.bload=function(t,a){var s={fadeInSpeed:300,maskOpacity:.4,imagePath:!1,imagePadding:16,imageDims:{w:32,h:32},imageAlign:"center",fullScreen:!1,overlay:{show:!1,color:"#000",opacity:.2}};if(i.isFunction(t))a=t,t=s;else var t=i.extend(!0,s,t);if(!0===i(this).data("bloadInit"))e=i(this).data("bload");else{i(this).data("bloadInit",!0);var e=new o;i(this).data("bload",e)}return e.init(i(this),t,a),e}}(jQuery);